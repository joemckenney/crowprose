{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["import path from 'node:path';\nimport express from 'express';\n\nimport { render } from '@www/app/ssr';\n\nimport template from '@www/app/template';\n\nimport serveStatic from 'serve-static';\n\nimport { fileURLToPath } from 'node:url';\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\n\nconst PORT = parseInt(process.env.PORT, 0) || 3000;\n\nconst app = express();\n\nasync function createServer() {\n  app.use(\n    serveStatic(path.resolve(__dirname, '../../app/dist/client'), {\n      index: false,\n    })\n  );\n\n  app.use('*', async (req, res) => {\n    res\n      .status(200)\n      .set({ 'Content-Type': 'text/html' })\n      .end(template.render({ html: render(req.url) }));\n  });\n\n  return { server: app };\n}\n\nconst { server } = await createServer();\nserver.listen(PORT, () => {\n  console.log(`http://localhost:${PORT}`);\n});\n"],"names":["__dirname","path","fileURLToPath","PORT","app","express","createServer","serveStatic","req","res","template","render","server"],"mappings":"4LAUA,MAAMA,EAAYC,EAAK,QAAQC,EAAc,YAAY,GAAG,CAAC,EAEvDC,EAAO,SAAS,QAAQ,IAAI,KAAM,CAAC,GAAK,IAExCC,EAAMC,EAAQ,EAEpB,eAAeC,GAAe,CAC5B,OAAAF,EAAI,IACFG,EAAYN,EAAK,QAAQD,EAAW,uBAAuB,EAAG,CAC5D,MAAO,EACT,CAAC,CACH,EAEAI,EAAI,IAAI,IAAK,MAAOI,EAAKC,IAAQ,CAC/BA,EACG,OAAO,GAAG,EACV,IAAI,CAAE,eAAgB,WAAY,CAAC,EACnC,IAAIC,EAAS,OAAO,CAAE,KAAMC,EAAOH,EAAI,GAAG,CAAE,CAAC,CAAC,CACnD,CAAC,EAEM,CAAE,OAAQJ,CAAI,CACvB,CAEA,KAAM,CAAE,OAAAQ,CAAO,EAAI,MAAMN,IACzBM,EAAO,OAAOT,EAAM,IAAM,CACxB,QAAQ,IAAI,oBAAoBA,CAAI,EAAE,CACxC,CAAC"}